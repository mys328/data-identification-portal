define(function(require,exports,module){angular.module('ngsea',[],["$controllerProvider","$compileProvider","$filterProvider","$provide",function($controllerProvider,$compileProvider,$filterProvider,$provide){$provide.factory('$ngsea',['$rootScope','$q','$location',function($rootScope,$q,$location){return function(app,settings){$rootScope.activeApply=function(fn){var phase=this.$root.$$phase;if(phase=='$apply'||phase=='$digest'){if(fn&&(typeof(fn)==='function')){fn()}}else{this.$apply(fn)}};var defaults={tpl_path:seajs.data.base+'src/module/',tpl_ext:'.html',mod_path:'src/module/',module:'home',controller:'index',action:'index',project:"bill",version:''};angular.extend(defaults,settings);var register={controller:$controllerProvider.register,directive:$compileProvider.directive,filter:$filterProvider.register,factory:$provide.factory,service:$provide.service,decorator:$provide.decorator};$rootScope.$on('$routeChangeStart',function(e,target){var route=target&&target.$$route||{};angular.extend(route,route_format(target.params));route.resolve=route.resolve||{};route.resolve.loadedModule=function(){var deferred=$q.defer();seajs.use(route.controllerUrl,function(m){$rootScope.activeApply(function(){if(angular.isUndefined(m)){deferred.reject(m);$location.url('/')}else{register.cname=route.cname;deferred.resolve(angular.isFunction(m)?m(register,app):m)}})});return deferred.promise}});var route_format=function(params){params.module=params.module||defaults.module;params.controller=params.controller||defaults.controller;params.action=params.action||defaults.action;params.project=params.project||defaults.project;return{controller:params.project+'_'+params.module+'_'+params.controller+'_'+params.action,templateUrl:defaults.tpl_path+params.project+'/'+params.module+'/'+params.controller+'/view/'+params.action+defaults.tpl_ext+'?v='+defaults.version,controllerUrl:defaults.mod_path+params.project+'/'+params.module+'/'+params.controller+'/ctrl/'+params.action,cname:params.project+'_'+params.module+'_'+params.controller+'_'+params.action}}}}])}])});